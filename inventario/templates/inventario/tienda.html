{% extends 'inventario/base.html' %}
{% load static %}

{% block title %}Tienda{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'inventario/css/tienda.css' %}">
{% endblock %}

{% block content %}
<h1 class="text-center mb-4">CatÃ¡logo de Herramientas</h1>

<!-- Indicador del carrito flotante -->
<div id="carrito-indicador" style="position: fixed; top: 20px; right: 20px; z-index: 9999;">
  <button id="abrir-carrito" class="btn btn-primary">
    ðŸ›’ <span id="contador-carrito">0</span>
  </button>
</div>

<!-- Lista de productos -->
<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">
  {% for producto in productos %}
  <div class="col">
    <div class="card product-card">
      {% if producto.imagen %}
        <img src="{{ producto.imagen.url }}" class="card-img-top product-image" alt="{{ producto.nombre }}">
      {% else %}
        <img src="https://via.placeholder.com/300x200" class="card-img-top product-image" alt="{{ producto.nombre }}">
      {% endif %}
      <div class="card-body">
        <h5 class="card-title">{{ producto.nombre }}</h5>
        <p class="card-text">{{ producto.descripcion }}</p>
        <p class="text-primary fw-bold">${{ producto.precio }}</p>
        <a href="#" class="btn btn-outline-primary w-100 agregar-carrito"
           data-id="{{ producto.id }}"
           data-nombre="{{ producto.nombre }}"
           data-precio="{{ producto.precio }}">
           Agregar al carrito
        </a>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<!-- Modal/carrito flotante -->
<div id="carrito-modal" style="display:none; position:fixed; top:80px; right:20px; background:white; border:1px solid #ccc; border-radius:10px; padding:15px; width:350px; max-height:500px; overflow:auto; box-shadow:0 4px 8px rgba(0,0,0,0.2); z-index:9999;">
  <h5>ðŸ›’ Tu carrito</h5>
  <div id="carrito-contenido"></div>
  <button class="btn btn-success w-100 mt-2">Comprar</button>
</div>

<script src="{% static 'inventario/js/tienda.js' %}"></script>
{% endblock %}
